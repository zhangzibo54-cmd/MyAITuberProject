# --- LLM / API / VECTOR DB CORE ---
pydantic>=2.11.5              # 确保使用最新的 pydantic 版本
llama-index>=0.10.0
llama-index-llms-ollama
llama-index-embeddings-ollama
llama-index-vector-stores-chroma
chromadb

# --- GPU / PYTORCH (必须在 RUN 命令中单独安装 torch, 但其他组件保留) ---
# 注意：torch, torchaudio, torchvision 已经在 Dockerfile 中通过 --index-url 统一安装，
#      但如果它们有其他非 PyTorch 轮子的依赖，可以保留在这里
# torch                       # 移到 Dockerfile 的 RUN 命令中安装
# torchaudio                  # 移到 Dockerfile 的 RUN 命令中安装
# torchvision                 # 移到 Dockerfile 的 RUN 命令中安装

# --- API / SERVER / UTILS ---
fastapi[standard]>=0.115.2
requests
ollama
huggingface_hub>=0.13
tokenizers>=0.13,<1
tqdm
PyYAML
psutil
chardet

# --- LLM UTILS & TRANSFORMERS ---
transformers<=4.50
peft
ctranslate2==4.4.0
x_transformers
torchmetrics<=1.5
rotary_embedding_torch
faster-whisper

# --- AUDIO & UTILS (保留兼容 numpy 2.x 的版本) ---
# 注意：我们不包含 numpy, scipy 的版本约束，让 pip 自由安装兼容 pydantic 2.x 的版本
#       这将导致 numpy 安装 2.x 版本，并解决与 fasttext 的冲突。
librosa==0.10.2
numba
ffmpeg-python
onnxruntime-gpu; platform_machine == "x86_64" or platform_machine == "AMD64"
onnxruntime; platform_machine == "aarch64" or platform_machine == "arm64"

# --- REMOVED GPT-SOVITS SPECIFIC / CONFLICTING DEPENDENCIES ---
# numpy<2.0 (REMOVED - 允许安装 2.x)
# scipy (REMOVED - 允许 pip 自动解决)
# fasttext==0.9.2 (REMOVED - 强依赖旧 numpy)
# funasr==1.0.27 (REMOVED - 仅用于 STT/ASR)
# pyopenjtalk>=0.4.1, g2p_en, ToJyutping, g2pk2, ko_pron (REMOVED - 仅用于 TTS/ASR)
# --no-binary=opencc, opencc (REMOVED - 仅用于 TTS/ASR)
# pydantic<=2.10.6 (REMOVED - 替换为 >=2.11.5)